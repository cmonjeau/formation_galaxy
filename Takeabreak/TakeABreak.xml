<tool id="takeabreak" name="TakeABreak" version="1.0.6">
  <description>is a tool that can detect inversion breakpoints directly from raw NGS reads</description>
  <requirements>
    <requirement type="package" version="1.0.6">galaxy_takeabreak</requirement>
  </requirements>
<command interpreter="python">
TakeABreak_wrapper.py
#if str( $options_usage.options_usage_selector ) == "graph"
-g $options_usage.graph_file
#end if
#if str( $options_usage.options_usage_selector ) == "reads"
-r $options_usage.data_files
-k $options_usage.kmer
-S $options_usage.kmersolid
#end if
-c $complexity
-m $maxsimprct
##-r $optimization_param
--output_graph $output_graph
--output_fasta $output_fasta
--output_log $output_log
2&gt;&amp;1
</command>

  <inputs>
	<!-- Input data files -->
	<conditional name="options_usage">
		<param name="options_usage_selector" type="select" label="Select your usage">
			<option value="reads" selected="true">Raw reads</option>
			<option value="graph">Previously generated de Bruijn graph</option>
		</param>
		<when value="reads">
			<param name="data_files" type="data" multiple="true" format="fasta" label="Read file" help="Raw reads as input" />
		        <param name="kmer" type="integer" label="length of the k-mers" value="31" help="Set the length of used kmers" />
		        <param name="kmersolid" type="integer" label="solidity threshold" value="3" help="k-mers having less than this number of occurrences are discarded from the graph" />

		</when>
		<when value="graph">
			<param name="graph_file" type="data" format="h5" label="Graph file" help="De Bruijn graph(s) as input" />
		</when>
	</conditional>
        <param name="complexity" type="integer" label="local complexity threshold" value="100" help="the local complexity threshold" />
        <param name="maxsimprct" type="integer" label="max similarity percentage" value="80" help="Inversions with a and b' (or u and v') whose longest common subsequence size is bigger than k*(this value)/100 are discarded" />
	<!--param name="optimization_param" type="integer" label="optimization parameter" value="8" help="max repeated size suffix of u and v" /-->		
  </inputs>

  <outputs>
      <data format="fasta" name="output_fasta" label="${tool.name} on ${on_string}: TakeABreak_output.fasta"/>
      <data format="h5" name="output_graph" label="${tool.name} on ${on_string}: graph.h5" >
	      	<filter>options_usage['options_usage_selector'] == 'reads'</filter>
      </data>
      <data format="txt" name="output_log" label="${tool.name} on ${on_string}: log.txt" />

  </outputs>
  <help>

**Description**

TakeABreak is a tool that can detect inversion breakpoints directly from raw NGS reads, without the need of any reference genome and without de novo assembling the genomes. Its implementation has a very limited memory impact allowing its usage on common desktop computers and acceptable runtime (Illumina reads simulated at 2x40x coverage from human chromosome 22 can be treated in less than two hours, with less than 1GB of memory).

-------

**Web site**

http://colibread.inria.fr/takeabreak/

-------

**Integrated by**

Yvan Le Bras and Cyril Monjeaud 

GenOuest Bio-informatics Core Facility

UMR 6074 IRISA INRIA-CNRS-UR1 Rennes (France)

support@genouest.org

If you use this tool in Galaxy, please cite :

`Y. Le Bras, A. Roult, C. Monjeaud, M. Bahin, O. Quenez, C. Heriveau, A. Bretaudeau, O. Sallou, O. Collin, Towards a Life Sciences Virtual Research Environment : an e-Science initiative in Western France. JOBIM 2013. &lt;https://www.e-biogenouest.org/resources/128&gt;`_

  </help>
</tool>

